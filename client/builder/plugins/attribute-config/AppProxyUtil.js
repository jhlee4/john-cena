// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/array","dojo/Deferred","jimu/portalUtils"],function(e,g,l){function h(a){return e.some(m,function(b){return-1<a.search(b)})}function k(a){return e.some(n,function(b){return-1<a.search(b)})}function p(a){var b=new g;if(a){var d=[];e.forEach(a.operationalLayers,function(b){var a,c;a=b.url;c=document.createElement("a");c.href=a;a=h(c.host);c=k(c.host);(a||c)&&d.push({sourceUrl:b.url,title:b.title||b.name,premium:a,consumeCredits:c,useProxy:!1})});b.resolve(d)}else b.resolve([]);return b}
var m=[/traffic\w*\.arcgis\.com/i,/landsat\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/hydro\w*\.arcgis\.com/i,/naip\w*\.arcgis\.com/i,/livefeeds\w*\.arcgis\.com/i,/demographics\w*\.arcgis\.com/i,/landscape\w*\.arcgis\.com/i,/historical\w*\.arcgis\.com/i,/earthobs\w*\.arcgis\.com/i],n=[/demographics\w*\.arcgis\.com/i,/geoenrich\w*\.arcgis\.com/i,/route\w*\.arcgis\.com/i,/logistics\w*\.arcgis\.com/i,/analysis\w*\.arcgis\.com/i,/elevation\w*\.arcgis\.com/i],f={queryForSecureServicesInMap:function(a,
b){try{return l.getPortal(a).getItemData(b).then(function(a){return p(a)},function(){return[]})}catch(q){var d=new g;d.resolve([]);return d}}};f.isPremium=h;f.consumesCredits=k;return f});