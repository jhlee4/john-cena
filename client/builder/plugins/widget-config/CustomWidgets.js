// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:builder/plugins/widget-config/CustomWidgets.html":'\x3cdiv data-dojo-attach-event\x3d"onscroll:_onScroll"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"list" class\x3d"list widget-list" data-dojo-attach-event\x3d"onclick:_onClick"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"loading" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./CustomWidgets.html dojo/Evented dojo/query dojo/_base/lang dojo/_base/array dojo/_base/html jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(h,k,l,m,n,p,e,d,f,b,g,q,r){return h([k,l,m,p],{templateString:n,baseClass:"custom-widgets",query:null,nls:null,type:"Code Sample",portalUrl:null,hidden:!1,postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},
postCreate:function(){this.inherited(arguments);this.portalUrl=r.getStandardPortalUrl(this.portalUrl);this.portal=q.getPortal(this.portalUrl);this.baseQ='type:"'+this.type+'" ';this.hidden&&this.hide()},queryItems:function(a){a=a||{};this.loading.show();this.clear();d.mixin(this.query,a);this.query.start=1;this.query.q=a.q?this.baseQ+" AND "+a.q:this.baseQ;return this.portal.queryItems(this.query).then(d.hitch(this,function(a){if(this.domNode)return this.domNode&&this.loading.hide(),this.query.start=
a.nextStart,this._createItemsNode(a)}),d.hitch(this,function(a){console.error(a);this.domNode&&this.loading.hide()}))},_createItemsNode:function(a){a=a.results;var c=this.type.toLowerCase();a=f.filter(a,d.hitch(this,function(a){return(a.type&&a.type.toLowerCase()||"")===c}));f.forEach(a,d.hitch(this,function(a){this._createItemNode(a)}));return a},_createItemNode:function(a){var c=b.toDom('\x3cdiv class\x3d"widget-node"\x3e\x3cdiv class\x3d"box"\x3e\x3cimg class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv class\x3d"box-selected"\x3e\x3c/div\x3e\x3cdiv class\x3d"label"\x3e\x3c/div\x3e\x3c/div\x3e');
c.item=a;e("img",c)[0].src=a.itemUrl+"/info/images/icon.png";e(".label",c)[0].innerHTML=a.title||"";b.place(c,this.list)},clear:function(){this.query={q:this.baseQ,sortField:"title",sortOrder:"asc",num:100,start:1};b.empty(this.list)},_onClick:function(a){a=a.target||a.srcElement;var c=null;(c=b.hasClass(a,"widget-node")?a:g.getAncestorDom(a,function(a){return b.hasClass(a,"widget-node")},this.list))&&b.toggleClass(c,"jimu-state-selected")},_onScroll:function(){this._isScrollToBottom(this.domNode)},
_isScrollToBottom:function(a){return g.isScrollToBottom(a)},getSelectedWidgetItems:function(){var a=e(".widget-node.jimu-state-selected",this.domNode);return f.map(a,d.hitch(this,function(a){return a.item}))},isVisible:function(){return!b.hasClass(this.domNode,"hidden")},show:function(){b.removeClass(this.domNode,"hidden")},hide:function(){b.addClass(this.domNode,"hidden")}})});